{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./Login.css\";import{Link,useNavigate}from'react-router-dom';import{API_URL}from'../../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[password,setPassword]=useState(\"\");const[email,setEmail]=useState('');const navigate=useNavigate();const[showerr,setShowerr]=useState('');useEffect(()=>{if(sessionStorage.getItem(\"auth-token\")){navigate(\"/\");}},[]);const handleLogin=async e=>{e.preventDefault();const res=await fetch(\"\".concat(API_URL,\"/api/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({// name: name,\nemail:email,password:password})});const json=await res.json();if(json.authtoken){sessionStorage.setItem('auth-token',json.authtoken);sessionStorage.setItem('email',email);navigate('/');window.location.reload();console.log(json);}else{if(json.error){for(const error of json.error){console.log(json.error);setShowerr(json.error);}}else{console.log(json.error);setShowerr(json.error);}}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"vh-100 d-flex align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto col-12 col-xs-10 col-sm-8 col-lg-6 col-xl-4 form-bg shadow px-3 px-sm-4 px-lg-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-black text-center font-bold text-3xl mt-5\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",children:[\"Are you a new member? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-capitalize text-decoration-none text-primary\",children:\" Sign Up Here\"})]}),/*#__PURE__*/_jsxs(\"form\",{method:\"POST\",className:\"mx-auto w-100\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailinput\",children:/*#__PURE__*/_jsx(\"span\",{className:\" text-capitalize\",children:\"email\"})})}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>setEmail(e.target.value),id:\"emailinput\",name:\"email\",type:\"email\",placeholder:\"Enter your email\",className:\"form-control\",required:true}),showerr&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",style:{color:'red'},children:showerr})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"passwordinput\",children:/*#__PURE__*/_jsx(\"span\",{className:\" text-capitalize\",children:\"Password\"})})}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>setPassword(e.target.value),id:\"passwordinput\",name:\"password\",type:\"password\",placeholder:\"Enter your password\",className:\"form-control\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-primary w-100 rounded-0 mb-3 \",type:\"submit\",value:\"Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-danger w-100 rounded-0 mb-3 \",type:\"reset\",value:\"Reset\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center mb-5\",children:\"Forgot your password?\"})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","API_URL","jsx","_jsx","jsxs","_jsxs","Login","password","setPassword","email","setEmail","navigate","showerr","setShowerr","sessionStorage","getItem","handleLogin","e","preventDefault","res","fetch","concat","method","headers","body","JSON","stringify","json","authtoken","setItem","window","location","reload","console","log","error","children","className","to","onSubmit","htmlFor","onChange","target","value","id","name","type","placeholder","required","style","color"],"sources":["/home/project/StayHealthy/stay-healthy/src/Components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport \"./Login.css\"\nimport { Link, useNavigate } from 'react-router-dom';\nimport { API_URL } from '../../config';\n\n\nconst Login = () => {    \n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState('');\n  const navigate = useNavigate();\n  const [showerr, setShowerr] = useState('');\n\n  useEffect(() => {\n    if (sessionStorage.getItem(\"auth-token\")) {\n      navigate(\"/\")\n    }\n  }, []);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    const res = await fetch(`${API_URL}/api/auth/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        // name: name,\n        email:email,\n        password: password,\n      }),\n    });\n    \n    const json = await res.json();\n    if (json.authtoken) {\n      sessionStorage.setItem('auth-token', json.authtoken);        \n      sessionStorage.setItem('email', email);\n      navigate('/');\n      window.location.reload()\n      console.log(json)\n\n    } else {\n      if (json.error) {        \n        for (const error of json.error) {\n            console.log(json.error )\n            setShowerr(json.error);\n        }\n      } else {\n        console.log(json.error )\n        setShowerr(json.error);\n      }\n    }\n  };\n\n\n  return (\n    <div>\n        <section className=\"vh-100 d-flex align-items-center\" >\n            <div className=\"mx-auto col-12 col-xs-10 col-sm-8 col-lg-6 col-xl-4 form-bg shadow px-3 px-sm-4 px-lg-5\">\n                <h2 className=\"text-black text-center font-bold text-3xl mt-5\">Login</h2>\n                <p className=\"text-center\">\n                    Are you a new member? <Link to=\"/register\" className=\"text-capitalize text-decoration-none text-primary\"> Sign Up Here</Link>\n                </p>\n                <form method=\"POST\" className=\"mx-auto w-100\" onSubmit={handleLogin}>            \n                    <div className=\"form-group mb-3\">   \n                        <div>\n                            <label htmlFor=\"emailinput\">\n                                <span className=\" text-capitalize\">email</span>\n                            </label>\n                        </div>             \n                        <input onChange={(e)=>setEmail(e.target.value)} id=\"emailinput\" name=\"email\" type=\"email\" placeholder=\"Enter your email\" className=\"form-control\" required/>                    \n                        {showerr && <div className=\"alert alert-danger\" style={{ color: 'red' }}>{showerr}</div>}                        \n                    </div>\n                    <div className=\"form-group mb-3\">   \n                        <div>\n                            <label htmlFor=\"passwordinput\">\n                                <span className=\" text-capitalize\">Password</span>\n                            </label>\n                        </div>             \n                        <input onChange={(e)=>setPassword(e.target.value)} id=\"passwordinput\" name=\"password\" type=\"password\" placeholder=\"Enter your password\" className=\"form-control\" required/>\n                    </div>\n                    \n                    <div className=\"mt-4\">\n                        <input className=\"btn btn-primary w-100 rounded-0 mb-3 \" type=\"submit\" value=\"Login\"/>                       \n                    </div>  \n                    <div className=\"\">\n                        <input className=\"btn btn-danger w-100 rounded-0 mb-3 \" type=\"reset\" value=\"Reset\"/>                   \n                    </div>               \n                </form>\n                <p className=\"text-center mb-5\">\n                    Forgot your password? \n                </p>\n            </div>\n        </section>\n</div>\n  )\n}\n\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}